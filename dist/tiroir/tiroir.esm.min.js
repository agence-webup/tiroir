/*!
 * Tiroir.js v0.1.2
 * (c) 2020-2022 Agence Webup
 * Released under the MIT License.
 */
function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e}function u(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function b(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)null==e[i]?t.removeAttribute(i):"style"===i?t.style.cssText=e[i]:"__value"===i?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:p(t,i,e[i])}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let v;function y(t){v=t}function x(){const t=function(){if(!v)throw new Error("Function called outside component initialization");return v}();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,!1,e),i}(e,n);i.slice().forEach((e=>{e.call(t,r)}))}}}const _=[],$=[],I=[],A=[],O=Promise.resolve();let w=!1;function E(){w||(w=!0,O.then(T))}function L(){return E(),O}function H(t){I.push(t)}const j=new Set;let k=0;function T(){const t=v;do{for(;k<_.length;){const t=_[k];k++,y(t),B(t.$$)}for(y(null),_.length=0,k=0;$.length;)$.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];j.has(e)||(j.add(e),e())}I.length=0}while(_.length);for(;A.length;)A.pop()();w=!1,j.clear(),y(t)}function B(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}const N=new Set;function S(t,e){t&&t.i&&(N.delete(t),t.i(e))}function C(t,e){const n={},i={},r={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const t in o)t in a||(i[t]=1);for(const t in a)r[t]||(n[t]=a[t],r[t]=1);t[s]=a}else for(const t in o)r[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function V(t,e,i,o){const{fragment:a,on_mount:u,on_destroy:l,after_update:c}=t.$$;a&&a.m(e,i),o||H((()=>{const e=u.map(n).filter(s);l?l.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(H)}function M(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(e,n,s,o,a,u,l,d=[-1]){const f=v;y(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:i(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};l&&l(h.root);let b=!1;if(h.ctx=s?s(e,n.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),b&&function(t,e){-1===t.$$.dirty[0]&&(_.push(t),E(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),b=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(c)}else h.fragment&&h.fragment.c();n.intro&&S(e.$$.fragment),V(e,n.target,n.anchor,n.customElement),T()}y(f)}class R{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const q=[];function z(t,e){return{subscribe:D(t,e).subscribe}}function D(e,n=t){let i;const r=new Set;function s(t){if(o(e,t)&&(e=t,i)){const t=!q.length;for(const t of r)t[1](),q.push(t,e);if(t){for(let t=0;t<q.length;t+=2)q[t][0](q[t+1]);q.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,a=t){const u=[o,a];return r.add(u),1===r.size&&(i=n(s)||t),o(e),()=>{r.delete(u),0===r.size&&(i(),i=null)}}}}class P{constructor(t){this.shownBy=new Set,this.hiddenBy=new Set,this.focusedBy=new Set,this.unfocusedBy=new Set,this.updateTabIndexOrigin(t),this.updateOverride(t),this.updateAriaHiddenOrigin(t),this.tabIndexAssigned=null,this.ariaHiddenAssignedValue=null}tabbable(){return(null===this.tabIndexAssigned||-1!==this.tabIndexAssigned)&&(null!==this.tabIndexAssigned&&this.tabIndexAssigned>-1||this.tabIndexOriginValue>-1)}updateAriaHiddenOrigin(t){const e=this.parseAriaHidden(t);return(void 0===this.ariaHiddenOrigin||this.ariaHiddenOrigin!==e&&this.ariaHiddenAssignedValue!==e)&&(this.ariaHiddenOrigin=e,!0)}updateTabIndexOrigin(t,e){if(void 0!==e)return this.tabIndexAssigned!==e&&this.tabIndexOriginAssigned!==e&&(null!=e&&(this.tabIndexOriginValue=e),this.tabIndexOriginAssigned=e,!0);const n=t.tabIndex;return this.tabIndexOriginValue!==n&&this.tabIndexAssigned!==n&&(this.tabIndexOriginValue=n,this.tabIndexOriginAssigned=this.parseTabIndex(t),!0)}parseOverride(t){return!!t&&("true"===(t=t.toLowerCase())||"focus"===t)}updateOverride(t,e){e=void 0!==e?e:t.dataset.focusOverride;const n=this.parseOverride(e);return this.override!==n&&(this.override=n,!0)}operationsFor(t,e){return[this.tabIndexOp(t),this.ariaHiddenOp(t,e)]}ariaHiddenOp(t,e){if(!e||this.override)return null;if(this.shownBy.size)this.ariaHiddenAssignedValue=!1;else if(this.hiddenBy.size)this.ariaHiddenAssignedValue=!0;else if(null!==this.ariaHiddenAssignedValue){if(null===this.ariaHiddenOrigin)return()=>{t.removeAttribute("aria-hidden"),this.ariaHiddenAssignedValue=null};const e=this.ariaHiddenOrigin.toString();return()=>{t.ariaHidden=e}}if(null!==this.ariaHiddenAssignedValue){const e=this.ariaHiddenAssignedValue.toString();return()=>{t.ariaHidden=e}}return null}tabIndexOp(t){if(this.override)return null;if(this.focusedBy.size){if(-1===this.tabIndexAssigned||-1!==t.tabIndex)this.tabIndexAssigned=0;else if(null===this.tabIndexAssigned||t.tabIndex===this.tabIndexAssigned)return null}else if(this.unfocusedBy.size){const e=this.parseTabIndex(t);if(!(null!==e&&e>=0||null===this.tabIndexAssigned&&this.tabIndexOriginValue>=0||0===this.tabIndexAssigned))return null;this.tabIndexAssigned=-1}else if(null!==this.tabIndexAssigned){if(null===this.tabIndexOriginAssigned)return this.tabIndexAssigned=null,()=>{t.removeAttribute("tabindex")};const e=this.tabIndexOriginAssigned;return this.tabIndexOriginAssigned=null,()=>{t.tabIndex=e}}if(null!==this.tabIndexAssigned&&t.tabIndex!==this.tabIndexAssigned){const{tabIndexAssigned:e}=this;return()=>{t.tabIndex=e}}return null}addTrap(t,e,n){const{trap:i,focusable:r,assignAriaHidden:s}=e;return n===i?(r&&(this.tabIndexAssigned=0),this.focusedBy.add(t),this.unfocusedBy.delete(t),this.shownBy.add(t),this.hiddenBy.delete(t),this.operationsFor(n,!!s)):i.contains(n)||n.contains(i)?(this.focusedBy.add(t),this.unfocusedBy.delete(t),s&&(this.shownBy.add(t),this.hiddenBy.delete(t)),this.operationsFor(n,!!s)):(this.unfocusedBy.add(t),this.focusedBy.delete(t),s&&(this.hiddenBy.add(t),this.shownBy.delete(t)),this.operationsFor(n,!!s))}removeLock(t){this.focusedBy.delete(t),this.unfocusedBy.delete(t),this.hiddenBy.delete(t),this.shownBy.delete(t)}parseTabIndex(t,e){if(void 0===e)return t.hasAttribute("tabindex")?t.tabIndex:null;if(null==e&&(e=""),""===(e=e.trim()))return null;const n=parseInt(e);return isNaN(n)?null:n}parseAriaHidden(t){const e=t.getAttribute("aria-hidden");return"true"===e||"false"!==e&&null}}const U=z(void 0,(t=>(t(new WeakMap),()=>{t(new WeakMap)})));let W;const X=z([],(function(t){if("undefined"!=typeof document)return W||(W=new MutationObserver((e=>{t(e)}))),W.observe(document.body,{attributes:!0,attributeFilter:["tabindex","aria-hidden","data-focus-override"],attributeOldValue:!1,childList:!0,subtree:!0}),()=>{W.disconnect()};t([])})),G=()=>document.body.querySelectorAll("*");function J(){}const K=t=>t&&t();function Q(t,e){const n=Object.freeze({});let i,r,s,o,a,u,l=!1,c=!1,d=!1;if("undefined"==typeof document)return{update:J,destroy:J};function f(t){if(!(t instanceof HTMLElement))return[];return function(t){let e=i.get(t);return e||(e=new P(t),i.set(t,e)),e}(t).addTrap(n,s,t)}async function h(t){let e=[];t.forEach((t=>{e=e.concat(f(t))})),await s.delay(),e.forEach((t=>K(t)))}async function b(t){let e=[];t.forEach((t=>{e=e.concat(function(t){if(!(t instanceof HTMLElement))return[];if(!i)return[];const e=i.get(t);return e?(e.removeLock(n),e.operationsFor(t,c)):[]}(t))})),s&&await s.delay(),e.forEach((t=>K(t)))}function p(t){i&&("childList"===t.type&&t.addedNodes&&function(t){const{addedNodes:e}=t;null!==e&&(h(e),t.addedNodes.forEach((t=>{h(t.childNodes)})))}(t),"attributes"===t.type&&async function(t){const{target:e}=t;if(!(e instanceof HTMLElement))return;const{attributeName:n}=t;if(null===n)return;const r=i.get(e);if(!r)return;let o;switch(n){case"tabindex":r.updateTabIndexOrigin(e,e.hasAttribute("tabindex")?e.tabIndex:null)&&(o=[r.tabIndexOp(e)]);break;case"data-focus-override":r.updateOverride(e,e.dataset.focusOverride)&&(o=r.operationsFor(e,c));break;case"aria-hidden":r.updateAriaHiddenOrigin(e)&&(o=[r.ariaHiddenOp(e,c)])}o&&(await s.delay(),o.forEach((t=>K(t))))}(t))}const m=t=>t.forEach(p);const g=()=>U.subscribe((t=>{i=t}));function v(e){const n=l;"boolean"==typeof e?(l=e,c=!1,e={}):"object"==typeof e?l=!!(null==e?void 0:e.enabled):(l=!1,e={}),c=!!(null==e?void 0:e.assignAriaHidden),d=!!e.focusable,r=e.element;let{focusDelay:f,delay:b}=e;const{preventScroll:p}=e;if("number"==typeof f){const t=f;f=()=>new Promise((e=>setTimeout(e,t)))}if("number"==typeof b){const t=b;b=()=>new Promise((e=>setTimeout(e,t)))}if(f||(f=L),b||(b=L),s={assignAriaHidden:c,enabled:l,focusable:d,trap:t,element:r,focusDelay:f,delay:b,preventScroll:p},!l)return y();!i&&a&&(a(),a=g()),a||(a=g()),h(G()),o||(o=X.subscribe(m)),n&&u&&(void 0===r||r===u)||(function(){const t=document.activeElement;if(t instanceof HTMLElement){const e=i.get(t);e&&!e.tabbable()&&t.blur()}}(),async function(){await s.focusDelay();const{preventScroll:e}=s;if(r){let n=null;if("string"==typeof r)try{n=t.querySelector(r)}catch(t){n=null}if(r instanceof Element&&(n=r),n&&n instanceof HTMLElement&&n.tabIndex>-1)return n.focus({preventScroll:e}),void(u=n)}if(t.tabIndex>-1&&t.focus({preventScroll:e}),"undefined"!=typeof document&&document.activeElement===t)return void(u=t);const n=t.querySelectorAll("*");for(let t=0;t<n.length;t++){const r=n.item(t),s=i.get(r);if(s&&s.tabbable()&&r instanceof HTMLElement)return r.focus({preventScroll:e}),void(u=r)}}())}function y(){if(o&&(o(),o=void 0),b(G()),a&&(a(),a=void 0),"undefined"!=typeof document){const{activeElement:e}=document;(t===e||t.contains(e))&&e instanceof HTMLElement&&e.blur()}}return(!0===e||"object"==typeof e&&(null==e?void 0:e.enabled))&&v(e),{update:v,destroy:y}}function Y(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function Z(t){let e,n,i,s,o,a,m,v,y,x=t[2].label+"",_=t[2].link&&tt(t);return{c(){e=d("button"),n=f(t[0]),i=h(),s=d("button"),o=f(x),a=h(),_&&_.c(),m=f(""),p(e,"class","tiroirjs__reset"),p(e,"type","button"),p(s,"class","tiroirjs__back"),p(s,"type","button")},m(r,c){l(r,e,c),u(e,n),l(r,i,c),l(r,s,c),u(s,o),l(r,a,c),_&&_.m(r,c),l(r,m,c),v||(y=[b(e,"click",t[7]),b(s,"click",t[5])],v=!0)},p(t,e){1&e&&g(n,t[0]),4&e&&x!==(x=t[2].label+"")&&g(o,x),t[2].link?_?_.p(t,e):(_=tt(t),_.c(),_.m(m.parentNode,m)):_&&(_.d(1),_=null)},d(t){t&&c(e),t&&c(i),t&&c(s),t&&c(a),_&&_.d(t),t&&c(m),v=!1,r(y)}}}function tt(t){let e,n,i,r,s,o=t[2].label+"";return{c(){e=d("a"),n=f(t[1]),i=h(),r=f(o),p(e,"class","tiroirjs__current"),p(e,"href",s=t[2].link)},m(t,s){l(t,e,s),u(e,n),u(e,i),u(e,r)},p(t,i){2&i&&g(n,t[1]),4&i&&o!==(o=t[2].label+"")&&g(r,o),4&i&&s!==(s=t[2].link)&&p(e,"href",s)},d(t){t&&c(e)}}}function et(t){let n,i,r,s,o=t[13].label+"",a=[t[13]?.attributes,{class:r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[13].attributes?.class??"")},{href:s=t[13].link}],h={};for(let t=0;t<a.length;t+=1)h=e(h,a[t]);return{c(){n=d("a"),i=f(o),m(n,h)},m(t,e){l(t,n,e),u(n,i)},p(t,e){16&e&&o!==(o=t[13].label+"")&&g(i,o),m(n,h=C(a,[16&e&&t[13]?.attributes,20&e&&r!==(r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[13].attributes?.class??""))&&{class:r},16&e&&s!==(s=t[13].link)&&{href:s}]))},d(t){t&&c(n)}}}function nt(t){let n,i,r,s,o,a=t[13].label+"",h=[t[13]?.attributes,{class:r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[13].attributes?.class??"")},{type:"button"}],p={};for(let t=0;t<h.length;t+=1)p=e(p,h[t]);function v(){return t[10](t[15])}return{c(){n=d("button"),i=f(a),m(n,p)},m(t,e){l(t,n,e),u(n,i),n.autofocus&&n.focus(),s||(o=b(n,"click",v),s=!0)},p(e,s){t=e,16&s&&a!==(a=t[13].label+"")&&g(i,a),m(n,p=C(h,[16&s&&t[13]?.attributes,20&s&&r!==(r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[13].attributes?.class??""))&&{class:r},{type:"button"}]))},d(t){t&&c(n),s=!1,o()}}}function it(t){let e,n;function i(t,e){return t[13].items?nt:et}let r=i(t),s=r(t);return{c(){e=d("li"),s.c(),n=h()},m(t,i){l(t,e,i),s.m(e,null),u(e,n)},p(t,o){r===(r=i(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e,n)))},d(t){t&&c(e),s.d()}}}function rt(e){let n,i,r,s=e[2]&&Z(e),o=e[4],a=[];for(let t=0;t<o.length;t+=1)a[t]=it(Y(e,o,t));return{c(){n=d("div"),s&&s.c(),i=h(),r=d("ul");for(let t=0;t<a.length;t+=1)a[t].c();p(r,"class","tiroirjs__navList"),p(n,"class","tiroirjs__nav")},m(t,o){l(t,n,o),s&&s.m(n,null),u(n,i),u(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);e[11](r)},p(t,[e]){if(t[2]?s?s.p(t,e):(s=Z(t),s.c(),s.m(n,i)):s&&(s.d(1),s=null),84&e){let n;for(o=t[4],n=0;n<o.length;n+=1){const i=Y(t,o,n);a[n]?a[n].p(i,e):(a[n]=it(i),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},i:t,o:t,d(t){t&&c(n),s&&s.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(a,t),e[11](null)}}}function st(t,e,n){let i,r;const s=x();let o,{resetLabel:a}=e,{currentLabel:u}=e,{items:l=[]}=e,c=[];const d=t=>{n(9,c=[...c,t])};return t.$$set=t=>{"resetLabel"in t&&n(0,a=t.resetLabel),"currentLabel"in t&&n(1,u=t.currentLabel),"items"in t&&n(8,l=t.items)},t.$$.update=()=>{768&t.$$.dirty&&n(2,i=0===c.length?null:c.reduce(((t,e)=>t.items[e]),{items:l})),260&t.$$.dirty&&n(4,r=i?i.items:l),512&t.$$.dirty&&c.length&&(async()=>{await L(),s("level",c.length)})()},[a,u,i,o,r,()=>{n(9,c=c.slice(0,-1))},d,()=>{n(9,c=[])},l,c,t=>d(t),function(t){$[t?"unshift":"push"]((()=>{o=t,n(3,o)}))}]}class ot extends R{constructor(t){super(),F(this,t,st,rt,a,{resetLabel:0,currentLabel:1,items:8})}}function at(n){let i,o,a,f,m,g,v,y,x,_,$,I,A,O,w,E;const L=[n[3]];let H={};for(let t=0;t<L.length;t+=1)H=e(H,L[t]);return g=new ot({props:H}),n[10](g),g.$on("level",n[9]),{c(){var t;i=d("div"),o=d("div"),f=h(),m=d("div"),(t=g.$$.fragment)&&t.c(),v=h(),y=d("div"),x=h(),_=d("div"),p(o,"class",a="tiroirjs__overlay "+(n[0]?"active":"")),p(y,"class","tiroirjs__custom"),p(_,"class","tiroirjs__footer"),p(m,"class",$="tiroirjs__menu "+(n[0]?"active":"")+" "+(n[2]?"tiroirjs__menu--reverse":"")),p(i,"class",A="tiroirjs "+(n[0]?"active":""))},m(e,r){var a;l(e,i,r),u(i,o),u(i,f),u(i,m),V(g,m,null),u(m,v),u(m,y),n[11](y),u(m,x),u(m,_),n[12](_),n[13](m),O=!0,w||(E=[b(window,"keydown",n[8]),b(o,"click",n[7]),(a=I=Q.call(null,m,{enabled:n[0],assignAriaHidden:!0}),a&&s(a.destroy)?a.destroy:t)],w=!0)},p(t,[e]){(!O||1&e&&a!==(a="tiroirjs__overlay "+(t[0]?"active":"")))&&p(o,"class",a);const n=8&e?C(L,[(r=t[3],"object"==typeof r&&null!==r?r:{})]):{};var r;g.$set(n),(!O||5&e&&$!==($="tiroirjs__menu "+(t[0]?"active":"")+" "+(t[2]?"tiroirjs__menu--reverse":"")))&&p(m,"class",$),I&&s(I.update)&&1&e&&I.update.call(null,{enabled:t[0],assignAriaHidden:!0}),(!O||1&e&&A!==(A="tiroirjs "+(t[0]?"active":"")))&&p(i,"class",A)},i(t){O||(S(g.$$.fragment,t),O=!0)},o(t){!function(t,e,n,i){if(t&&t.o){if(N.has(t))return;N.add(t),(void 0).c.push((()=>{N.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}(g.$$.fragment,t),O=!1},d(t){t&&c(i),n[10](null),M(g),n[11](null),n[12](null),n[13](null),w=!1,r(E)}}}function ut(t){return t.querySelector('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])')}function lt(t,e,n){let i,r,s,{active:o=!1}=e,{directionReverse:a=!1}=e,{navOptions:u}=e,{customContent:l}=e;const c=()=>{document.activeElement.blur(),n(0,o=!1)};return t.$$set=t=>{"active"in t&&n(0,o=t.active),"directionReverse"in t&&n(2,a=t.directionReverse),"navOptions"in t&&n(3,u=t.navOptions),"customContent"in t&&n(1,l=t.customContent)},[o,l,a,u,i,r,s,c,function(t){"Escape"===t.key&&o&&c()},function(t){ut(r.$capture_state().navlist).focus()},function(t){$[t?"unshift":"push"]((()=>{r=t,n(5,r)}))},function(t){$[t?"unshift":"push"]((()=>{l=t,n(1,l)}))},function(t){$[t?"unshift":"push"]((()=>{s=t,n(6,s)}))},function(t){$[t?"unshift":"push"]((()=>{i=t,n(4,i)}))}]}class ct extends R{constructor(t){super(),F(this,t,lt,at,o,{active:0,directionReverse:2,navOptions:3,customContent:1})}}const dt=t=>t,ft=t=>t.reduceRight(((t,e)=>e(t)),dt),ht=t=>e=>null==e?null:t(e),bt=t=>e=>n=>{if(typeof n===t)return e(n);throw new Error(`${typeof n} is not a type ${t}`)},pt=(mt=HTMLElement,t=>e=>{if(e instanceof mt)return t(e);throw new Error(`${e.constructor.name} is not an instance of ${mt.name}`)});var mt;const gt=ft([t=>e=>{if(null!=e)return t(e);throw new Error(typeof e+" is required")},pt]),vt=ft([ht,pt]),yt=ft([ht,t=>e=>{const n=Array.isArray(e)?e:e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[e];return t(n.map(ft([pt])))}]),xt=ft([ht,bt("function")]);ft([ht,bt("string")]);const _t=(t,e)=>{return ft([(n=e,t=>e=>t(null==e?n:e)),bt("string")])(t);var n},$t=t=>t.nodeType===Node.ELEMENT_NODE,It=t=>t.nodeType===Node.TEXT_NODE,At=t=>e=>$t(e)&&e.nodeName===t,Ot=At("UL"),wt=At("LI"),Et=At("A"),Lt=At("BUTTON"),Ht=(t,e)=>Object.fromEntries(Array.from(e).filter((e=>!t.includes(e.name))).map((t=>[t.name,t.nodeValue]))),jt=t=>{if(wt(t)){const e=Array.from(t.childNodes),n=e.find(Ot),i=e.find(Et),r=e.find(Lt);if(!n&&!i)throw new Error("Invalid item : children does not have ul or a");return{items:n?kt(n):null,link:i?i.href:null,label:i||r?(i||r).textContent:e.filter(It).reduce(((t,e)=>t+e.nodeValue),""),attributes:i?Ht(["href"],i.attributes):r?Ht(["type"],r.attributes):{}}}throw new Error("Invalid item : node is not a li ")},kt=t=>{if(Ot(t))return Array.from(t.childNodes).filter($t).map(jt);throw new Error("Invalid list : node is not a ul")};class Tt{constructor(t){var e,n;this.content=vt(t.content),this.trigger=yt(t.trigger),this.onOpen=xt(t.onOpen),this.onClose=xt(t.onClose),this.resetLabel=_t(t.resetLabel,"Back home"),this.currentLabel=_t(t.currentLabel,"All"),this.directionReverse=t.directionReverse??!1,this.trigger&&this.trigger.forEach((t=>{t.addEventListener("click",(()=>{this.open()}))})),this.menu=new ct({target:document.body,props:{directionReverse:this.directionReverse,navOptions:{resetLabel:this.resetLabel,currentLabel:this.currentLabel}}});const i=null===(e=this.content)||void 0===e?void 0:e.querySelector("[data-tiroir-nav]");i&&(this.parseItems(i),i.remove());const r=null===(n=this.content)||void 0===n?void 0:n.querySelector("[data-tiroir-footer]");r&&(r.removeAttribute("data-tiroir-footer"),this.setFooter(r)),this.content&&this.setContent(this.content)}open(){this.menu.$capture_state().open()}close(){this.menu.$capture_state().close()}isOpen(){return!!this.menu.$capture_state().active}toggle(){this.menu.$capture_state().toggle()}setItems(t){this.menu.$capture_state().setItems(t)}parseItems(t){this.setItems((t=>{if(Ot(t))return kt(t);{const e=Array.from(t.childNodes);if(e.some(Ot))return kt(e.find(Ot));throw new Error("Invalid content : node have no ul child")}})(gt(t)))}setContent(t){this.menu.$capture_state().setCustomContent(gt(t))}setFooter(t){this.menu.$capture_state().setFooter(gt(t))}}var Bt,Nt,St;St="active",(Nt="activeClass")in(Bt=Tt)?Object.defineProperty(Bt,Nt,{value:St,enumerable:!0,configurable:!0,writable:!0}):Bt[Nt]=St;export{Tt as default};
