/*!
 * Tiroir.js v0.1.2
 * (c) 2020-2022 Agence Webup
 * Released under the MIT License.
 */
function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e}function a(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)null==e[r]?t.removeAttribute(r):"style"===r?t.style.cssText=e[r]:"__value"===r?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:m(t,r,e[r])}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let y;function g(t){y=t}function v(){const t=function(){if(!y)throw new Error("Function called outside component initialization");return y}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}const _=[],E=[],$=[],L=[],w=Promise.resolve();let C=!1;function N(){C||(C=!0,w.then(A))}function k(t){$.push(t)}const x=new Set;let S=0;function A(){const t=y;do{for(;S<_.length;){const t=_[S];S++,g(t),I(t.$$)}for(g(null),_.length=0,S=0;E.length;)E.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];x.has(e)||(x.add(e),e())}$.length=0}while(_.length);for(;L.length;)L.pop()();C=!1,x.clear(),g(t)}function I(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const O=new Set;function T(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const s=t[i],a=e[i];if(a){for(const t in s)t in a||(r[t]=1);for(const t in a)o[t]||(n[t]=a[t],o[t]=1);t[i]=a}else for(const t in s)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function j(e,s,a,c,u,d,f,h=[-1]){const m=y;g(e);const p=e.$$={fragment:null,ctx:null,props:d,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(m?m.$$.context:[])),callbacks:r(),dirty:h,skip_bound:!1,root:s.target||m.$$.root};f&&f(p.root);let b=!1;if(p.ctx=a?a(e,s.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&u(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),b&&function(t,e){-1===t.$$.dirty[0]&&(_.push(t),N(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],p.update(),b=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();s.intro&&((v=e.$$.fragment)&&v.i&&(O.delete(v),v.i(E))),function(t,e,r,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=t.$$;a&&a.m(e,r),s||k((()=>{const e=c.map(n).filter(i);l?l.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(k)}(e,s.target,s.anchor,s.customElement),A()}var v,E;g(m)}function M(t,e,n){const r=t.slice();return r[11]=e[n],r[13]=n,r}function D(t){let e,n,r,i,s,p,y,g,v,_=t[2].label+"",E=t[2].link&&q(t);return{c(){e=u("button"),n=d(t[0]),r=f(),i=u("button"),s=d(_),p=f(),E&&E.c(),y=d(""),m(e,"class","tiroirjs__reset"),m(e,"type","button"),m(i,"class","tiroirjs__back"),m(i,"type","button")},m(o,l){c(o,e,l),a(e,n),c(o,r,l),c(o,i,l),a(i,s),c(o,p,l),E&&E.m(o,l),c(o,y,l),g||(v=[h(e,"click",t[6]),h(i,"click",t[4])],g=!0)},p(t,e){1&e&&b(n,t[0]),4&e&&_!==(_=t[2].label+"")&&b(s,_),t[2].link?E?E.p(t,e):(E=q(t),E.c(),E.m(y.parentNode,y)):E&&(E.d(1),E=null)},d(t){t&&l(e),t&&l(r),t&&l(i),t&&l(p),E&&E.d(t),t&&l(y),g=!1,o(v)}}}function q(t){let e,n,r,o,i,s=t[2].label+"";return{c(){e=u("a"),n=d(t[1]),r=f(),o=d(s),m(e,"class","tiroirjs__current"),m(e,"href",i=t[2].link)},m(t,i){c(t,e,i),a(e,n),a(e,r),a(e,o)},p(t,r){2&r&&b(n,t[1]),4&r&&s!==(s=t[2].label+"")&&b(o,s),4&r&&i!==(i=t[2].link)&&m(e,"href",i)},d(t){t&&l(e)}}}function z(t){let n,r,o,i,s=t[11].label+"",f=[t[11]?.attributes,{class:o="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[11].attributes?.class??"")},{href:i=t[11].link}],h={};for(let t=0;t<f.length;t+=1)h=e(h,f[t]);return{c(){n=u("a"),r=d(s),p(n,h)},m(t,e){c(t,n,e),a(n,r)},p(t,e){8&e&&s!==(s=t[11].label+"")&&b(r,s),p(n,h=T(f,[8&e&&t[11]?.attributes,12&e&&o!==(o="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[11].attributes?.class??""))&&{class:o},8&e&&i!==(i=t[11].link)&&{href:i}]))},d(t){t&&l(n)}}}function U(t){let n,r,o,i,s,f=t[11].label+"",m=[t[11]?.attributes,{class:o="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[11].attributes?.class??"")},{type:"button"}],y={};for(let t=0;t<m.length;t+=1)y=e(y,m[t]);function g(){return t[9](t[13])}return{c(){n=u("button"),r=d(f),p(n,y)},m(t,e){c(t,n,e),a(n,r),n.autofocus&&n.focus(),i||(s=h(n,"click",g),i=!0)},p(e,i){t=e,8&i&&f!==(f=t[11].label+"")&&b(r,f),p(n,y=T(m,[8&i&&t[11]?.attributes,12&i&&o!==(o="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[11].attributes?.class??""))&&{class:o},{type:"button"}]))},d(t){t&&l(n),i=!1,s()}}}function B(t){let e,n;function r(t,e){return t[11].items?U:z}let o=r(t),i=o(t);return{c(){e=u("li"),i.c(),n=f()},m(t,r){c(t,e,r),i.m(e,null),a(e,n)},p(t,s){o===(o=r(t))&&i?i.p(t,s):(i.d(1),i=o(t),i&&(i.c(),i.m(e,n)))},d(t){t&&l(e),i.d()}}}function P(e){let n,r,o,i=e[2]&&D(e),s=e[3],d=[];for(let t=0;t<s.length;t+=1)d[t]=B(M(e,s,t));return{c(){n=u("div"),i&&i.c(),r=f(),o=u("ul");for(let t=0;t<d.length;t+=1)d[t].c();m(o,"class","tiroirjs__navList")},m(t,e){c(t,n,e),i&&i.m(n,null),a(n,r),a(n,o);for(let t=0;t<d.length;t+=1)d[t].m(o,null)},p(t,[e]){if(t[2]?i?i.p(t,e):(i=D(t),i.c(),i.m(n,r)):i&&(i.d(1),i=null),44&e){let n;for(s=t[3],n=0;n<s.length;n+=1){const r=M(t,s,n);d[n]?d[n].p(r,e):(d[n]=B(r),d[n].c(),d[n].m(o,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=s.length}},i:t,o:t,d(t){t&&l(n),i&&i.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(d,t)}}}function X(t,e,n){let r,o;const i=v();let{resetLabel:s}=e,{currentLabel:a}=e,{items:c=[]}=e,l=[];const u=t=>{n(8,l=[...l,t])};return t.$$set=t=>{"resetLabel"in t&&n(0,s=t.resetLabel),"currentLabel"in t&&n(1,a=t.currentLabel),"items"in t&&n(7,c=t.items)},t.$$.update=()=>{384&t.$$.dirty&&n(2,r=0===l.length?null:l.reduce(((t,e)=>t.items[e]),{items:c})),132&t.$$.dirty&&n(3,o=r?r.items:c),256&t.$$.dirty&&l.length&&(async()=>{await(N(),w),i("level",l.length)})()},[s,a,r,o,()=>{n(8,l=l.slice(0,-1))},u,()=>{n(8,l=[])},c,l,t=>u(t)]}class H extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),j(this,t,X,P,s,{resetLabel:0,currentLabel:1,items:7})}}const R=t=>t,F=t=>t.reduceRight(((t,e)=>e(t)),R),V=t=>e=>null==e?null:t(e),G=t=>e=>n=>{if(typeof n===t)return e(n);throw new Error(`${typeof n} is not a type ${t}`)},Y=(J=HTMLElement,t=>e=>{if(e instanceof J)return t(e);throw new Error(`${e.constructor.name} is not an instance of ${J.name}`)});var J;const K=F([t=>e=>{if(null!=e)return t(e);throw new Error(typeof e+" is required")},Y]),Q=F([V,t=>e=>{const n=Array.isArray(e)?e:e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[e];return t(n.map(F([Y])))}]),W=F([V,G("function")]);F([V,G("string")]);const Z=(t,e)=>{return F([(n=e,t=>e=>t(null==e?n:e)),G("string")])(t);var n},tt=t=>t.nodeType===Node.ELEMENT_NODE,et=t=>t.nodeType===Node.TEXT_NODE,nt=t=>e=>tt(e)&&e.nodeName===t,rt=nt("UL"),ot=nt("LI"),it=nt("A"),st=nt("BUTTON"),at=(t,e)=>Object.fromEntries(Array.from(e).filter((e=>!t.includes(e.name))).map((t=>[t.name,t.nodeValue]))),ct=t=>{if(ot(t)){const e=Array.from(t.childNodes),n=e.find(rt),r=e.find(it),o=e.find(st);if(!n&&!r)throw new Error("Invalid item : children does not have ul or a");return{items:n?lt(n):null,link:r?r.href:null,label:r||o?(r||o).textContent:e.filter(et).reduce(((t,e)=>t+e.nodeValue),""),attributes:r?at(["href"],r.attributes):o?at(["type"],o.attributes):{}}}throw new Error("Invalid item : node is not a li ")},lt=t=>{if(rt(t))return Array.from(t.childNodes).filter(tt).map(ct);throw new Error("Invalid list : node is not a ul")};
/*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
var ut,dt,ft,ht=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"].join(","),mt="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,pt=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?function(t){return"true"===t.contentEditable}(t)?0:"AUDIO"!==t.nodeName&&"VIDEO"!==t.nodeName&&"DETAILS"!==t.nodeName||null!==t.getAttribute("tabindex")?t.tabIndex:0:e},bt=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},yt=function(t){return"INPUT"===t.tagName},gt=function(t){return function(t){return yt(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e,n=t.form||t.ownerDocument,r=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=r(window.CSS.escape(t.name));else try{e=r(t.name)}catch(t){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",t.message),!1}var o=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return!o||o===t}(t)},vt=function(t,e){return!(e.disabled||function(t){return yt(t)&&"hidden"===t.type}(e)||function(t,e){if("hidden"===getComputedStyle(t).visibility)return!0;var n=mt.call(t,"details>summary:first-of-type")?t.parentElement:t;if(mt.call(n,"details:not([open]) *"))return!0;if(e&&"full"!==e){if("non-zero-area"===e){var r=t.getBoundingClientRect(),o=r.width,i=r.height;return 0===o&&0===i}}else for(;t;){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1}(e,t.displayCheck)||function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))}(e)||function(t){if(yt(t)||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||"BUTTON"===t.tagName)for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var r=e.children.item(n);if("LEGEND"===r.tagName)return!r.contains(t)}return!0}e=e.parentElement}return!1}(e))},_t=function(t,e){return!(!vt(t,e)||gt(e)||pt(e)<0)},Et=function(t,e){var n=[],r=[];return function(t,e,n){var r=Array.prototype.slice.apply(t.querySelectorAll(ht));return e&&mt.call(t,ht)&&r.unshift(t),r.filter(n)}(t,(e=e||{}).includeContainer,_t.bind(null,e)).forEach((function(t,e){var o=pt(t);0===o?n.push(t):r.push({documentOrder:e,tabIndex:o,node:t})})),r.sort(bt).map((function(t){return t.node})).concat(n)};class $t{constructor(t){this.target=K(t.target),this.trigger=Q(t.trigger),this.onOpen=W(t.onOpen),this.onClose=W(t.onClose),this.resetLabel=Z(t.resetLabel,"Back home"),this.currentLabel=Z(t.currentLabel,"All"),this.overlay=t.target.querySelector(".tiroirjs__overlay"),this.menuContainer=t.target.querySelector(".tiroirjs__menu"),this.direction=this.menuContainer.classList.contains("tiroirjs__menu--left"),this.startDistance=0,this.distance=0;const e=this.target.querySelector(".tiroirjs__nav");let n=[];const r=document.createElement("div");r.classList.add("tiroirjs__nav"),e?(n=(t=>{if(rt(t))return lt(t);{const e=Array.from(t.childNodes);if(e.some(rt))return lt(e.find(rt));throw new Error("Invalid content : node have no ul child")}})(e),e.parentNode.replaceChild(r,e)):this.menuContainer.prepend(r),this.menu=new H({target:t.target.querySelector(".tiroirjs__nav"),props:{items:n,resetLabel:this.resetLabel,currentLabel:this.currentLabel}}),this.menu.$on("level",(t=>{this._resetTab()})),this.trigger&&this.trigger.forEach((t=>{t.addEventListener("click",(()=>{this.toggle()}))})),this.overlay&&this.overlay.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),this.close()}),!1),document.addEventListener("touchstart",(t=>{this._touchStart(t)}),!1),document.addEventListener("touchmove",(t=>{this._touchMove(t)}),!1),document.addEventListener("touchend",(t=>{this._touchEnd(t)}),!1),document.addEventListener("keydown",(t=>{"Escape"===t.key&&this.isOpen()&&this.close()}))}_normalizeElement(t){if(t instanceof HTMLElement)return t;throw new Error(t.constructor.name+" is not an html element")}_normalizeSelector(t){const e=(()=>{switch(!0){case Array.isArray(t):return t;case t instanceof NodeList||t instanceof HTMLCollection:return Array.from(t);default:return[t]}})();for(const t of e)this._normalizeElement(t);return e}_normalizeFunction(t){if("function"==typeof t)return t;throw new Error(t.constructor.name+" is not an valid function")}_transitionEnd(){this.isOpen()||this.close()}_touchStart(t){this.isOpen()&&(this.startDistance=t.touches[0].pageX)}_touchMove(t){this.isOpen()&&(this.distance=(this.direction?Math.min:Math.max)(0,t.touches[0].pageX-this.startDistance),this.menuContainer.style.transform="translateX("+this.distance+"px)")}_touchEnd(){this.isOpen()&&(Math.abs(this.distance)>70?this.close():this.menuContainer.style.transform=null)}_resetTab(){var t;null===(t=Et(this.menuContainer))||void 0===t||t[0].focus()}open(){this.overlay.classList.add(this.constructor.activeClass),this.menuContainer.classList.add(this.constructor.activeClass),this.onOpen&&this.onOpen(),this._resetTab()}close(){document.activeElement.blur(),this.menuContainer.style.transform=null,this.overlay.classList.remove(this.constructor.activeClass),this.menuContainer.classList.remove(this.constructor.activeClass),this.onClose&&this.onClose()}isOpen(){return this.menuContainer.classList.contains(this.constructor.activeClass)}toggle(){this.isOpen()?this.close():this.open()}setItems(t){this.menu.$set({items:t})}}ft="active",(dt="activeClass")in(ut=$t)?Object.defineProperty(ut,dt,{value:ft,enumerable:!0,configurable:!0,writable:!0}):ut[dt]=ft;export{$t as default};
