/*!
 * Tiroir.js v0.2.0
 * (c) 2020-2022 Agence Webup
 * Released under the MIT License.
 */
function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function b(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)null==e[i]?t.removeAttribute(i):"style"===i?t.style.cssText=e[i]:"__value"===i?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:p(t,i,e[i])}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let v;function y(t){v=t}function $(){const t=function(){if(!v)throw new Error("Function called outside component initialization");return v}();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,!1,e),i}(e,n);i.slice().forEach((e=>{e.call(t,r)}))}}}const x=[],I=[],_=[],A=[],O=Promise.resolve();let E=!1;function w(){E||(E=!0,O.then(T))}function L(){return w(),O}function H(t){_.push(t)}const j=new Set;let k=0;function T(){const t=v;do{for(;k<x.length;){const t=x[k];k++,y(t),B(t.$$)}for(y(null),x.length=0,k=0;I.length;)I.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];j.has(e)||(j.add(e),e())}_.length=0}while(x.length);for(;A.length;)A.pop()();E=!1,j.clear(),y(t)}function B(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}const C=new Set;function N(t,e){t&&t.i&&(C.delete(t),t.i(e))}function S(t,e){const n={},i={},r={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const t in o)t in a||(i[t]=1);for(const t in a)r[t]||(n[t]=a[t],r[t]=1);t[s]=a}else for(const t in o)r[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function V(t,e,i,o){const{fragment:a,on_mount:l,on_destroy:u,after_update:d}=t.$$;a&&a.m(e,i),o||H((()=>{const e=l.map(n).filter(s);u?u.push(...e):r(e),t.$$.on_mount=[]})),d.forEach(H)}function M(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(e,n,s,o,a,l,u,c=[-1]){const f=v;y(e);const h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:i(),dirty:c,skip_bound:!1,root:n.target||f.$$.root};u&&u(h.root);let b=!1;if(h.ctx=s?s(e,n.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),b&&function(t,e){-1===t.$$.dirty[0]&&(x.push(t),w(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),b=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(d)}else h.fragment&&h.fragment.c();n.intro&&N(e.$$.fragment),V(e,n.target,n.anchor,n.customElement),T()}y(f)}class R{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const q=[];function z(t,e){return{subscribe:D(t,e).subscribe}}function D(e,n=t){let i;const r=new Set;function s(t){if(o(e,t)&&(e=t,i)){const t=!q.length;for(const t of r)t[1](),q.push(t,e);if(t){for(let t=0;t<q.length;t+=2)q[t][0](q[t+1]);q.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(o,a=t){const l=[o,a];return r.add(l),1===r.size&&(i=n(s)||t),o(e),()=>{r.delete(l),0===r.size&&(i(),i=null)}}}}class P{constructor(t){this.shownBy=new Set,this.hiddenBy=new Set,this.focusedBy=new Set,this.unfocusedBy=new Set,this.updateTabIndexOrigin(t),this.updateOverride(t),this.updateAriaHiddenOrigin(t),this.tabIndexAssigned=null,this.ariaHiddenAssignedValue=null}tabbable(){return(null===this.tabIndexAssigned||-1!==this.tabIndexAssigned)&&(null!==this.tabIndexAssigned&&this.tabIndexAssigned>-1||this.tabIndexOriginValue>-1)}updateAriaHiddenOrigin(t){const e=this.parseAriaHidden(t);return(void 0===this.ariaHiddenOrigin||this.ariaHiddenOrigin!==e&&this.ariaHiddenAssignedValue!==e)&&(this.ariaHiddenOrigin=e,!0)}updateTabIndexOrigin(t,e){if(void 0!==e)return this.tabIndexAssigned!==e&&this.tabIndexOriginAssigned!==e&&(null!=e&&(this.tabIndexOriginValue=e),this.tabIndexOriginAssigned=e,!0);const n=t.tabIndex;return this.tabIndexOriginValue!==n&&this.tabIndexAssigned!==n&&(this.tabIndexOriginValue=n,this.tabIndexOriginAssigned=this.parseTabIndex(t),!0)}parseOverride(t){return!!t&&("true"===(t=t.toLowerCase())||"focus"===t)}updateOverride(t,e){e=void 0!==e?e:t.dataset.focusOverride;const n=this.parseOverride(e);return this.override!==n&&(this.override=n,!0)}operationsFor(t,e){return[this.tabIndexOp(t),this.ariaHiddenOp(t,e)]}ariaHiddenOp(t,e){if(!e||this.override)return null;if(this.shownBy.size)this.ariaHiddenAssignedValue=!1;else if(this.hiddenBy.size)this.ariaHiddenAssignedValue=!0;else if(null!==this.ariaHiddenAssignedValue){if(null===this.ariaHiddenOrigin)return()=>{t.removeAttribute("aria-hidden"),this.ariaHiddenAssignedValue=null};const e=this.ariaHiddenOrigin.toString();return()=>{t.ariaHidden=e}}if(null!==this.ariaHiddenAssignedValue){const e=this.ariaHiddenAssignedValue.toString();return()=>{t.ariaHidden=e}}return null}tabIndexOp(t){if(this.override)return null;if(this.focusedBy.size){if(-1===this.tabIndexAssigned||-1!==t.tabIndex)this.tabIndexAssigned=0;else if(null===this.tabIndexAssigned||t.tabIndex===this.tabIndexAssigned)return null}else if(this.unfocusedBy.size){const e=this.parseTabIndex(t);if(!(null!==e&&e>=0||null===this.tabIndexAssigned&&this.tabIndexOriginValue>=0||0===this.tabIndexAssigned))return null;this.tabIndexAssigned=-1}else if(null!==this.tabIndexAssigned){if(null===this.tabIndexOriginAssigned)return this.tabIndexAssigned=null,()=>{t.removeAttribute("tabindex")};const e=this.tabIndexOriginAssigned;return this.tabIndexOriginAssigned=null,()=>{t.tabIndex=e}}if(null!==this.tabIndexAssigned&&t.tabIndex!==this.tabIndexAssigned){const{tabIndexAssigned:e}=this;return()=>{t.tabIndex=e}}return null}addTrap(t,e,n){const{trap:i,focusable:r,assignAriaHidden:s}=e;return n===i?(r&&(this.tabIndexAssigned=0),this.focusedBy.add(t),this.unfocusedBy.delete(t),this.shownBy.add(t),this.hiddenBy.delete(t),this.operationsFor(n,!!s)):i.contains(n)||n.contains(i)?(this.focusedBy.add(t),this.unfocusedBy.delete(t),s&&(this.shownBy.add(t),this.hiddenBy.delete(t)),this.operationsFor(n,!!s)):(this.unfocusedBy.add(t),this.focusedBy.delete(t),s&&(this.hiddenBy.add(t),this.shownBy.delete(t)),this.operationsFor(n,!!s))}removeLock(t){this.focusedBy.delete(t),this.unfocusedBy.delete(t),this.hiddenBy.delete(t),this.shownBy.delete(t)}parseTabIndex(t,e){if(void 0===e)return t.hasAttribute("tabindex")?t.tabIndex:null;if(null==e&&(e=""),""===(e=e.trim()))return null;const n=parseInt(e);return isNaN(n)?null:n}parseAriaHidden(t){const e=t.getAttribute("aria-hidden");return"true"===e||"false"!==e&&null}}const W=z(void 0,(t=>(t(new WeakMap),()=>{t(new WeakMap)})));let U;const X=z([],(function(t){if("undefined"!=typeof document)return U||(U=new MutationObserver((e=>{t(e)}))),U.observe(document.body,{attributes:!0,attributeFilter:["tabindex","aria-hidden","data-focus-override"],attributeOldValue:!1,childList:!0,subtree:!0}),()=>{U.disconnect()};t([])})),G=()=>document.body.querySelectorAll("*");function J(){}const K=t=>t&&t();function Q(t,e){const n=Object.freeze({});let i,r,s,o,a,l,u=!1,d=!1,c=!1;if("undefined"==typeof document)return{update:J,destroy:J};function f(t){if(!(t instanceof HTMLElement))return[];return function(t){let e=i.get(t);return e||(e=new P(t),i.set(t,e)),e}(t).addTrap(n,s,t)}async function h(t){let e=[];t.forEach((t=>{e=e.concat(f(t))})),await s.delay(),e.forEach((t=>K(t)))}async function b(t){let e=[];t.forEach((t=>{e=e.concat(function(t){if(!(t instanceof HTMLElement))return[];if(!i)return[];const e=i.get(t);return e?(e.removeLock(n),e.operationsFor(t,d)):[]}(t))})),s&&await s.delay(),e.forEach((t=>K(t)))}function p(t){i&&("childList"===t.type&&t.addedNodes&&function(t){const{addedNodes:e}=t;null!==e&&(h(e),t.addedNodes.forEach((t=>{h(t.childNodes)})))}(t),"attributes"===t.type&&async function(t){const{target:e}=t;if(!(e instanceof HTMLElement))return;const{attributeName:n}=t;if(null===n)return;const r=i.get(e);if(!r)return;let o;switch(n){case"tabindex":r.updateTabIndexOrigin(e,e.hasAttribute("tabindex")?e.tabIndex:null)&&(o=[r.tabIndexOp(e)]);break;case"data-focus-override":r.updateOverride(e,e.dataset.focusOverride)&&(o=r.operationsFor(e,d));break;case"aria-hidden":r.updateAriaHiddenOrigin(e)&&(o=[r.ariaHiddenOp(e,d)])}o&&(await s.delay(),o.forEach((t=>K(t))))}(t))}const m=t=>t.forEach(p);const g=()=>W.subscribe((t=>{i=t}));function v(e){const n=u;"boolean"==typeof e?(u=e,d=!1,e={}):"object"==typeof e?u=!!(null==e?void 0:e.enabled):(u=!1,e={}),d=!!(null==e?void 0:e.assignAriaHidden),c=!!e.focusable,r=e.element;let{focusDelay:f,delay:b}=e;const{preventScroll:p}=e;if("number"==typeof f){const t=f;f=()=>new Promise((e=>setTimeout(e,t)))}if("number"==typeof b){const t=b;b=()=>new Promise((e=>setTimeout(e,t)))}if(f||(f=L),b||(b=L),s={assignAriaHidden:d,enabled:u,focusable:c,trap:t,element:r,focusDelay:f,delay:b,preventScroll:p},!u)return y();!i&&a&&(a(),a=g()),a||(a=g()),h(G()),o||(o=X.subscribe(m)),n&&l&&(void 0===r||r===l)||(function(){const t=document.activeElement;if(t instanceof HTMLElement){const e=i.get(t);e&&!e.tabbable()&&t.blur()}}(),async function(){await s.focusDelay();const{preventScroll:e}=s;if(r){let n=null;if("string"==typeof r)try{n=t.querySelector(r)}catch(t){n=null}if(r instanceof Element&&(n=r),n&&n instanceof HTMLElement&&n.tabIndex>-1)return n.focus({preventScroll:e}),void(l=n)}if(t.tabIndex>-1&&t.focus({preventScroll:e}),"undefined"!=typeof document&&document.activeElement===t)return void(l=t);const n=t.querySelectorAll("*");for(let t=0;t<n.length;t++){const r=n.item(t),s=i.get(r);if(s&&s.tabbable()&&r instanceof HTMLElement)return r.focus({preventScroll:e}),void(l=r)}}())}function y(){if(o&&(o(),o=void 0),b(G()),a&&(a(),a=void 0),"undefined"!=typeof document){const{activeElement:e}=document;(t===e||t.contains(e))&&e instanceof HTMLElement&&e.blur()}}return(!0===e||"object"==typeof e&&(null==e?void 0:e.enabled))&&v(e),{update:v,destroy:y}}function Y(t,e,n){const i=t.slice();return i[14]=e[n],i[16]=n,i}function Z(t){let e,n,i,s,o,a,m,v,y,$=t[2].label+"",x=t[2].link&&tt(t);return{c(){e=c("button"),n=f(t[0]),i=h(),s=c("button"),o=f($),a=h(),x&&x.c(),m=f(""),p(e,"class","tiroirjs__reset"),p(e,"type","button"),p(s,"class","tiroirjs__back"),p(s,"type","button")},m(r,d){u(r,e,d),l(e,n),u(r,i,d),u(r,s,d),l(s,o),u(r,a,d),x&&x.m(r,d),u(r,m,d),v||(y=[b(e,"click",t[7]),b(s,"click",t[5])],v=!0)},p(t,e){1&e&&g(n,t[0]),4&e&&$!==($=t[2].label+"")&&g(o,$),t[2].link?x?x.p(t,e):(x=tt(t),x.c(),x.m(m.parentNode,m)):x&&(x.d(1),x=null)},d(t){t&&d(e),t&&d(i),t&&d(s),t&&d(a),x&&x.d(t),t&&d(m),v=!1,r(y)}}}function tt(t){let e,n,i,r,s,o=t[2].label+"";return{c(){e=c("a"),n=f(t[1]),i=h(),r=f(o),p(e,"class","tiroirjs__current"),p(e,"href",s=t[2].link)},m(t,s){u(t,e,s),l(e,n),l(e,i),l(e,r)},p(t,i){2&i&&g(n,t[1]),4&i&&o!==(o=t[2].label+"")&&g(r,o),4&i&&s!==(s=t[2].link)&&p(e,"href",s)},d(t){t&&d(e)}}}function et(t){let n,i,r,s,o=t[14].label+"",a=[t[14]?.attributes,{class:r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[14].attributes?.class??"")},{href:s=t[14].link}],h={};for(let t=0;t<a.length;t+=1)h=e(h,a[t]);return{c(){n=c("a"),i=f(o),m(n,h)},m(t,e){u(t,n,e),l(n,i)},p(t,e){16&e&&o!==(o=t[14].label+"")&&g(i,o),m(n,h=S(a,[16&e&&t[14]?.attributes,20&e&&r!==(r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[14].attributes?.class??""))&&{class:r},16&e&&s!==(s=t[14].link)&&{href:s}]))},d(t){t&&d(n)}}}function nt(t){let n,i,r,s,o,a=t[14].label+"",h=[t[14]?.attributes,{class:r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[14].attributes?.class??"")},{type:"button"}],p={};for(let t=0;t<h.length;t+=1)p=e(p,h[t]);function v(){return t[11](t[16])}return{c(){n=c("button"),i=f(a),m(n,p)},m(t,e){u(t,n,e),l(n,i),n.autofocus&&n.focus(),s||(o=b(n,"click",v),s=!0)},p(e,s){t=e,16&s&&a!==(a=t[14].label+"")&&g(i,a),m(n,p=S(h,[16&s&&t[14]?.attributes,20&s&&r!==(r="tiroirjs__navItem "+(t[2]?"tiroirjs__navItem--child":"")+" "+(t[14].attributes?.class??""))&&{class:r},{type:"button"}]))},d(t){t&&d(n),s=!1,o()}}}function it(t){let e,n;function i(t,e){return t[14].items?nt:et}let r=i(t),s=r(t);return{c(){e=c("li"),s.c(),n=h()},m(t,i){u(t,e,i),s.m(e,null),l(e,n)},p(t,o){r===(r=i(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e,n)))},d(t){t&&d(e),s.d()}}}function rt(e){let n,i,r,s=e[2]&&Z(e),o=e[4],a=[];for(let t=0;t<o.length;t+=1)a[t]=it(Y(e,o,t));return{c(){n=c("div"),s&&s.c(),i=h(),r=c("ul");for(let t=0;t<a.length;t+=1)a[t].c();p(r,"class","tiroirjs__navList"),p(n,"class","tiroirjs__nav")},m(t,o){u(t,n,o),s&&s.m(n,null),l(n,i),l(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null);e[12](r)},p(t,[e]){if(t[2]?s?s.p(t,e):(s=Z(t),s.c(),s.m(n,i)):s&&(s.d(1),s=null),84&e){let n;for(o=t[4],n=0;n<o.length;n+=1){const i=Y(t,o,n);a[n]?a[n].p(i,e):(a[n]=it(i),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},i:t,o:t,d(t){t&&d(n),s&&s.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(a,t),e[12](null)}}}function st(t,e,n){let i,r;const s=$();let o,{resetLabel:a}=e,{currentLabel:l}=e,{items:u=[]}=e,d=[];const c=t=>{n(10,d=[...d,t])};return t.$$set=t=>{"resetLabel"in t&&n(0,a=t.resetLabel),"currentLabel"in t&&n(1,l=t.currentLabel),"items"in t&&n(8,u=t.items)},t.$$.update=()=>{1280&t.$$.dirty&&n(2,i=0===d.length?null:d.reduce(((t,e)=>t.items[e]),{items:u})),260&t.$$.dirty&&n(4,r=i?i.items:u),1024&t.$$.dirty&&d.length&&(async()=>{await L(),s("level",d.length)})()},[a,l,i,o,r,()=>{n(10,d=d.slice(0,-1))},c,()=>{n(10,d=[])},u,function(){o.querySelector('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])').focus()},d,t=>c(t),function(t){I[t?"unshift":"push"]((()=>{o=t,n(3,o)}))}]}class ot extends R{constructor(t){super(),F(this,t,st,rt,a,{resetLabel:0,currentLabel:1,items:8,focusFirstEl:9})}get focusFirstEl(){return this.$$.ctx[9]}}function at(n){let i,o,a,f,m,g,v,y,$,x,I,_,A,O,E,w;const L=[{items:n[7]},n[1]];let H={};for(let t=0;t<L.length;t+=1)H=e(H,L[t]);return g=new ot({props:H}),n[14](g),g.$on("level",n[9]),{c(){var t;i=c("div"),o=c("div"),f=h(),m=c("div"),(t=g.$$.fragment)&&t.c(),v=h(),y=c("div"),$=h(),x=c("div"),p(o,"class",a="tiroirjs__overlay "+(n[0]?"active":"")),p(y,"class","tiroirjs__custom"),p(x,"class","tiroirjs__footer"),p(m,"class",I="tiroirjs__menu "+(n[0]?"active":"")+" "+(n[2]?"tiroirjs__menu--reverse":"")),p(i,"class",A="tiroirjs "+(n[0]?"active":""))},m(e,r){var a;u(e,i,r),l(i,o),l(i,f),l(i,m),V(g,m,null),l(m,v),l(m,y),n[15](y),l(m,$),l(m,x),n[16](x),n[17](m),O=!0,E||(w=[b(window,"keydown",n[8]),b(o,"click",n[13]),(a=_=Q.call(null,m,{enabled:n[0],assignAriaHidden:!0}),a&&s(a.destroy)?a.destroy:t)],E=!0)},p(t,[e]){(!O||1&e&&a!==(a="tiroirjs__overlay "+(t[0]?"active":"")))&&p(o,"class",a);const n=130&e?S(L,[128&e&&{items:t[7]},2&e&&(r=t[1],"object"==typeof r&&null!==r?r:{})]):{};var r;g.$set(n),(!O||5&e&&I!==(I="tiroirjs__menu "+(t[0]?"active":"")+" "+(t[2]?"tiroirjs__menu--reverse":"")))&&p(m,"class",I),_&&s(_.update)&&1&e&&_.update.call(null,{enabled:t[0],assignAriaHidden:!0}),(!O||1&e&&A!==(A="tiroirjs "+(t[0]?"active":"")))&&p(i,"class",A)},i(t){O||(N(g.$$.fragment,t),O=!0)},o(t){!function(t,e,n,i){if(t&&t.o){if(C.has(t))return;C.add(t),(void 0).c.push((()=>{C.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}(g.$$.fragment,t),O=!1},d(t){t&&d(i),n[14](null),M(g),n[15](null),n[16](null),n[17](null),E=!1,r(w)}}}function lt(t,e,n){let i,r,s,o,a,{active:l=!1}=e,{customContent:u=null}=e,{footerContent:d=null}=e,{navigationItems:c=null}=e,{navOptions:f=null}=e,{directionReverse:h=!1}=e;return t.$$set=t=>{"active"in t&&n(0,l=t.active),"customContent"in t&&n(10,u=t.customContent),"footerContent"in t&&n(11,d=t.footerContent),"navigationItems"in t&&n(12,c=t.navigationItems),"navOptions"in t&&n(1,f=t.navOptions),"directionReverse"in t&&n(2,h=t.directionReverse)},t.$$.update=()=>{4096&t.$$.dirty&&c&&n(7,s=c),1032&t.$$.dirty&&u&&(n(3,o.innerHTML="",o),o.appendChild(u)),2064&t.$$.dirty&&d&&(d.classList.add("tiroirjs__footer"),a.replaceWith(d)),1&t.$$.dirty&&(l||document.activeElement.blur())},[l,f,h,o,a,i,r,s,function(t){"Escape"===t.key&&l&&n(0,l=!1)},function(t){r.focusFirstEl()},u,d,c,()=>n(0,l=!1),function(t){I[t?"unshift":"push"]((()=>{r=t,n(6,r)}))},function(t){I[t?"unshift":"push"]((()=>{o=t,n(3,o),n(10,u)}))},function(t){I[t?"unshift":"push"]((()=>{a=t,n(4,a)}))},function(t){I[t?"unshift":"push"]((()=>{i=t,n(5,i)}))}]}class ut extends R{constructor(t){super(),F(this,t,lt,at,o,{active:0,customContent:10,footerContent:11,navigationItems:12,navOptions:1,directionReverse:2})}}const dt=t=>t,ct=t=>t.reduceRight(((t,e)=>e(t)),dt),ft=t=>e=>null==e?null:t(e),ht=t=>e=>n=>{if(typeof n===t)return e(n);throw new Error(`${typeof n} is not a type ${t}`)},bt=(pt=HTMLElement,t=>e=>{if(e instanceof pt)return t(e);throw new Error(`${e.constructor.name} is not an instance of ${pt.name}`)});var pt;const mt=ct([t=>e=>{if(null!=e)return t(e);throw new Error(typeof e+" is required")},bt]),gt=ct([ft,bt]),vt=ct([ft,t=>e=>{const n=Array.isArray(e)?e:e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):[e];return t(n.map(ct([bt])))}]),yt=ct([ft,ht("function")]);ct([ft,ht("string")]);const $t=(t,e)=>{return ct([(n=e,t=>e=>t(null==e?n:e)),ht("string")])(t);var n},xt=t=>t.nodeType===Node.ELEMENT_NODE,It=t=>t.nodeType===Node.TEXT_NODE,_t=t=>e=>xt(e)&&e.nodeName===t,At=_t("UL"),Ot=_t("LI"),Et=_t("A"),wt=_t("BUTTON"),Lt=(t,e)=>Object.fromEntries(Array.from(e).filter((e=>!t.includes(e.name))).map((t=>[t.name,t.nodeValue]))),Ht=t=>{if(Ot(t)){const e=Array.from(t.childNodes),n=e.find(At),i=e.find(Et),r=e.find(wt);if(!n&&!i)throw new Error("Invalid item : children does not have ul or a");return{items:n?jt(n):null,link:i?i.href:null,label:i||r?(i||r).textContent:e.filter(It).reduce(((t,e)=>t+e.nodeValue),""),attributes:i?Lt(["href"],i.attributes):r?Lt(["type"],r.attributes):{}}}throw new Error("Invalid item : node is not a li ")},jt=t=>{if(At(t))return Array.from(t.childNodes).filter(xt).map(Ht);throw new Error("Invalid list : node is not a ul")};class kt{constructor(t){var e,n;this.content=gt(t.content),this.trigger=vt(t.trigger),this.onOpen=yt(t.onOpen),this.onClose=yt(t.onClose),this.resetLabel=$t(t.resetLabel,"Back home"),this.currentLabel=$t(t.currentLabel,"All"),this.directionReverse=t.directionReverse??!1,this.trigger&&this.trigger.forEach((t=>{t.addEventListener("click",(()=>{this.open()}))})),this.menu=new ut({target:document.body,props:{directionReverse:this.directionReverse,navOptions:{resetLabel:this.resetLabel,currentLabel:this.currentLabel}}});const i=null===(e=this.content)||void 0===e?void 0:e.querySelector("[data-tiroir-nav]");i&&(this.parseItems(i),i.remove());const r=null===(n=this.content)||void 0===n?void 0:n.querySelector("[data-tiroir-footer]");r&&(r.removeAttribute("data-tiroir-footer"),this.setFooter(r)),this.content&&this.setContent(this.content)}open(){this.menu.$set({active:!0})}close(){this.menu.$set({active:!1})}setItems(t){this.menu.$set({navigationItems:t})}parseItems(t){this.setItems((t=>{if(At(t))return jt(t);{const e=Array.from(t.childNodes);if(e.some(At))return jt(e.find(At));throw new Error("Invalid content : node have no ul child")}})(mt(t)))}setContent(t){this.menu.$set({customContent:t})}setFooter(t){this.menu.$set({footerContent:t})}}var Tt,Bt,Ct;Ct="active",(Bt="activeClass")in(Tt=kt)?Object.defineProperty(Tt,Bt,{value:Ct,enumerable:!0,configurable:!0,writable:!0}):Tt[Bt]=Ct;export{kt as default};
